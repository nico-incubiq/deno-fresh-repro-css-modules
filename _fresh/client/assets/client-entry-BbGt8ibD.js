import{l as D,t as Bt,k as A,x as bt,_ as g,G as jt,Q as Mt}from"./preact.module-B5DG9wGp.js";typeof globalThis>"u"&&(window.globalThis=window);const Xt="/_frsh",Kt="fresh-partial",ct="__frsh_c",K="data-current",Z="data-ancestor",Zt="data-frsh-key",S="f-client-nav";var Nt=function(e){return e.ATTR="attr",e.VNODE="vnode",e.HOOK="__h",e.DIFF="__b",e.RENDER="__r",e.DIFFED="diffed",e.ERROR="__e",e}({}),ut=function(e){return e[e.None=0]="None",e[e.Ancestor=1]="Ancestor",e[e.Current=2]="Current",e}({});function Jt(e,t){let n=new URL(t,"http://localhost").pathname;return n!=="/"&&n.endsWith("/")&&(n=n.slice(0,-1)),e!=="/"&&e.endsWith("/")&&(e=e.slice(0,-1)),e===n?2:e.startsWith(n+"/")||n==="/"?1:0}var R=function(e){return e[e.Replace=0]="Replace",e[e.Append=1]="Append",e[e.Prepend=2]="Prepend",e}({});function it(e,t){if(!e.startsWith("/")||e.startsWith("//"))return e;try{const n=new URL(e,"https://freshassetcache.local");return n.protocol!=="https:"||n.host!=="freshassetcache.local"||n.searchParams.has(ct)?e:(n.searchParams.set(ct,t),n.pathname+n.search+n.hash)}catch(n){return console.warn(`Failed to create asset() URL, falling back to regular path ('${e}'):`,n),e}}function zt(e,t){if(e.includes("("))return e;const n=e.split(","),i=[];for(const r of n){const o=r.trimStart(),s=r.length-o.length;if(o==="")return e;let f=o.indexOf(" ");f===-1&&(f=o.length);const u=r.substring(0,s),a=o.substring(0,f),c=o.substring(f);i.push(u+it(a,t)+c)}return i.join(",")}function Qt(e,t){if(e.type==="img"||e.type==="source"){const{props:n}=e;if(n["data-fresh-disable-lock"])return;typeof n.src=="string"&&(n.src=it(n.src,t)),typeof n.srcset=="string"&&(n.srcset=zt(n.srcset,t))}}let At="9bc5f698cad3c0ea6fb52e78cbd0717a2a543d01";var x,p,J,lt,Q=0,St=[],v=D,ht=v.__b,_t=v.__r,dt=v.diffed,pt=v.__c,vt=v.unmount,mt=v.__;function Et(e,t){v.__h&&v.__h(p,e,Q||t),Q=0;var n=p.__H||(p.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function te(e){return Q=1,ee(Tt,e)}function ee(e,t,n){var i=Et(x++,2);if(i.t=e,!i.__c&&(i.__=[Tt(void 0,t),function(f){var u=i.__N?i.__N[0]:i.__[0],a=i.t(u,f);u!==a&&(i.__N=[a,i.__[1]],i.__c.setState({}))}],i.__c=p,!p.__f)){var r=function(f,u,a){if(!i.__c.__H)return!0;var c=i.__c.__H.__.filter(function(l){return!!l.__c});if(c.every(function(l){return!l.__N}))return!o||o.call(this,f,u,a);var _=i.__c.props!==f;return c.forEach(function(l){if(l.__N){var d=l.__[0];l.__=l.__N,l.__N=void 0,d!==l.__[0]&&(_=!0)}}),o&&o.call(this,f,u,a)||_};p.__f=!0;var o=p.shouldComponentUpdate,s=p.componentWillUpdate;p.componentWillUpdate=function(f,u,a){if(this.__e){var c=o;o=void 0,r(f,u,a),o=c}s&&s.call(this,f,u,a)},p.shouldComponentUpdate=r}return i.__N||i.__}function ne(e,t){var n=Et(x++,7);return oe(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function ie(){for(var e;e=St.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(H),e.__H.__h.forEach(tt),e.__H.__h=[]}catch(t){e.__H.__h=[],v.__e(t,e.__v)}}v.__b=function(e){p=null,ht&&ht(e)},v.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),mt&&mt(e,t)},v.__r=function(e){_t&&_t(e),x=0;var t=(p=e.__c).__H;t&&(J===p?(t.__h=[],p.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(H),t.__h.forEach(tt),t.__h=[],x=0)),J=p},v.diffed=function(e){dt&&dt(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(St.push(t)!==1&&lt===v.requestAnimationFrame||((lt=v.requestAnimationFrame)||re)(ie)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),J=p=null},v.__c=function(e,t){t.some(function(n){try{n.__h.forEach(H),n.__h=n.__h.filter(function(i){return!i.__||tt(i)})}catch(i){t.some(function(r){r.__h&&(r.__h=[])}),t=[],v.__e(i,n.__v)}}),pt&&pt(e,t)},v.unmount=function(e){vt&&vt(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(i){try{H(i)}catch(r){t=r}}),n.__H=void 0,t&&v.__e(t,n.__v))};var yt=typeof requestAnimationFrame=="function";function re(e){var t,n=function(){clearTimeout(i),yt&&cancelAnimationFrame(t),setTimeout(e)},i=setTimeout(n,35);yt&&(t=requestAnimationFrame(n))}function H(e){var t=p,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),p=t}function tt(e){var t=p;e.__c=e.__(),p=t}function oe(e,t){return!e||e.length!==t.length||t.some(function(n,i){return n!==e[i]})}function Tt(e,t){return typeof t=="function"?t(e):t}const j=D,se=j.vnode;j.vnode=e=>{if(Qt(e,At),typeof e.type=="string"&&S in e.props){const t=e.props[S];typeof t=="boolean"&&(e.props[S]=String(t))}e.type,se?.(e)};const fe=j[Nt.DIFF];j[Nt.DIFF]=e=>{fe?.(e)};const ae=-1,ce=-2,ue=-3,le=-4,he=-5,_e=-6,de=-7;function Rt(e,t){const n=JSON.parse(e);if(!Array.isArray(n))return b([],[],n,t);const i=new Array(n.length);return b(n,i,0,t),i[0]}function b(e,t,n,i){switch(n){case ae:return;case ce:return null;case ue:return NaN;case le:return 1/0;case he:return-1/0;case _e:return-0}if(n in t)return t[n];const r=e[n];if(typeof r=="number")return t[n]=r;if(typeof r=="string"||typeof r=="boolean"||r===null)return t[n]=r;if(Array.isArray(r))if(r.length>0&&typeof r[0]=="string"){const o=r[0];if(i!==void 0&&o in i){const s=i[o],f=r[1],u=b(e,t,f,i);return t[n]=s(u)}switch(o){case"BigInt":return t[n]=BigInt(r[1]);case"URL":return t[n]=new URL(r[1]);case"Date":return t[n]=new Date(r[1]);case"RegExp":return t[n]=new RegExp(r[1],r[2]);case"Set":{const s=new Set;for(let f=0;f<r[1].length;f++){const u=r[1][f];s.add(b(e,t,u,i))}return t[n]=s}case"Map":{const s=new Map;for(let f=0;f<r[1].length;f++){const u=r[1][f++],a=b(e,t,u,i),c=r[1][f],_=b(e,t,c,i);s.set(a,_)}return t[n]=s}case"Uint8Array":return t[n]=pe(r[1])}}else{const o=new Array(r.length);t[n]=o;for(let s=0;s<r.length;s++){const f=r[s];f!==de&&(o[s]=b(e,t,f,i))}return o}else if(typeof r=="object"){const o={};t[n]=o;const s=Object.keys(r);for(let f=0;f<s.length;f++){const u=s[f],a=r[u];o[u]=b(e,t,a,i)}return o}}function pe(e){const t=atob(e),n=t.length,i=new Uint8Array(n);for(let r=0;r<n;r++)i[r]=t.charCodeAt(r);return i}var ve=Symbol.for("preact-signals");function M(){if(N>1)N--;else{for(var e,t=!1;O!==void 0;){var n=O;for(O=void 0,et++;n!==void 0;){var i=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&$t(n))try{n.c()}catch(r){t||(e=r,t=!0)}n=i}}if(et=0,N--,t)throw e}}function me(e){if(N>0)return e();N++;try{return e()}finally{M()}}var h=void 0;function Ct(e){var t=h;h=void 0;try{return e()}finally{h=t}}var O=void 0,N=0,et=0,k=0;function Lt(e){if(h!==void 0){var t=e.n;if(t===void 0||t.t!==h)return t={i:0,S:e,p:h.s,n:void 0,t:h,e:void 0,x:void 0,r:t},h.s!==void 0&&(h.s.n=t),h.s=t,e.n=t,32&h.f&&e.S(t),t;if(t.i===-1)return t.i=0,t.n!==void 0&&(t.n.p=t.p,t.p!==void 0&&(t.p.n=t.n),t.p=h.s,t.n=void 0,h.s.n=t,h.s=t),t}}function m(e,t){this.v=e,this.i=0,this.n=void 0,this.t=void 0,this.W=t?.watched,this.Z=t?.unwatched,this.name=t?.name}m.prototype.brand=ve;m.prototype.h=function(){return!0};m.prototype.S=function(e){var t=this,n=this.t;n!==e&&e.e===void 0&&(e.x=n,this.t=e,n!==void 0?n.e=e:Ct(function(){var i;(i=t.W)==null||i.call(t)}))};m.prototype.U=function(e){var t=this;if(this.t!==void 0){var n=e.e,i=e.x;n!==void 0&&(n.x=i,e.e=void 0),i!==void 0&&(i.e=n,e.x=void 0),e===this.t&&(this.t=i,i===void 0&&Ct(function(){var r;(r=t.Z)==null||r.call(t)}))}};m.prototype.subscribe=function(e){var t=this;return F(function(){var n=t.value,i=h;h=void 0;try{e(n)}finally{h=i}},{name:"sub"})};m.prototype.valueOf=function(){return this.value};m.prototype.toString=function(){return this.value+""};m.prototype.toJSON=function(){return this.value};m.prototype.peek=function(){var e=h;h=void 0;try{return this.value}finally{h=e}};Object.defineProperty(m.prototype,"value",{get:function(){var e=Lt(this);return e!==void 0&&(e.i=this.i),this.v},set:function(e){if(e!==this.v){if(et>100)throw new Error("Cycle detected");this.v=e,this.i++,k++,N++;try{for(var t=this.t;t!==void 0;t=t.x)t.t.N()}finally{M()}}}});function rt(e,t){return new m(e,t)}function $t(e){for(var t=e.s;t!==void 0;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return!0;return!1}function It(e){for(var t=e.s;t!==void 0;t=t.n){var n=t.S.n;if(n!==void 0&&(t.r=n),t.S.n=t,t.i=-1,t.n===void 0){e.s=t;break}}}function Pt(e){for(var t=e.s,n=void 0;t!==void 0;){var i=t.p;t.i===-1?(t.S.U(t),i!==void 0&&(i.n=t.n),t.n!==void 0&&(t.n.p=i)):n=t,t.S.n=t.r,t.r!==void 0&&(t.r=void 0),t=i}e.s=n}function E(e,t){m.call(this,void 0),this.x=e,this.s=void 0,this.g=k-1,this.f=4,this.W=t?.watched,this.Z=t?.unwatched,this.name=t?.name}E.prototype=new m;E.prototype.h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===k))return!0;if(this.g=k,this.f|=1,this.i>0&&!$t(this))return this.f&=-2,!0;var e=h;try{It(this),h=this;var t=this.x();(16&this.f||this.v!==t||this.i===0)&&(this.v=t,this.f&=-17,this.i++)}catch(n){this.v=n,this.f|=16,this.i++}return h=e,Pt(this),this.f&=-2,!0};E.prototype.S=function(e){if(this.t===void 0){this.f|=36;for(var t=this.s;t!==void 0;t=t.n)t.S.S(t)}m.prototype.S.call(this,e)};E.prototype.U=function(e){if(this.t!==void 0&&(m.prototype.U.call(this,e),this.t===void 0)){this.f&=-33;for(var t=this.s;t!==void 0;t=t.n)t.S.U(t)}};E.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var e=this.t;e!==void 0;e=e.x)e.t.N()}};Object.defineProperty(E.prototype,"value",{get:function(){if(1&this.f)throw new Error("Cycle detected");var e=Lt(this);if(this.h(),e!==void 0&&(e.i=this.i),16&this.f)throw this.v;return this.v}});function nt(e,t){return new E(e,t)}function Ot(e){var t=e.u;if(e.u=void 0,typeof t=="function"){N++;var n=h;h=void 0;try{t()}catch(i){throw e.f&=-2,e.f|=8,ot(e),i}finally{h=n,M()}}}function ot(e){for(var t=e.s;t!==void 0;t=t.n)t.S.U(t);e.x=void 0,e.s=void 0,Ot(e)}function ye(e){if(h!==this)throw new Error("Out-of-order effect");Pt(this),h=e,this.f&=-2,8&this.f&&ot(this),M()}function $(e,t){this.x=e,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32,this.name=t?.name}$.prototype.c=function(){var e=this.S();try{if(8&this.f||this.x===void 0)return;var t=this.x();typeof t=="function"&&(this.u=t)}finally{e()}};$.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,Ot(this),It(this),N++;var e=h;return h=this,ye.bind(this,e)};$.prototype.N=function(){2&this.f||(this.f|=2,this.o=O,O=this)};$.prototype.d=function(){this.f|=8,1&this.f||ot(this)};$.prototype.dispose=function(){this.d()};function F(e,t){var n=new $(e,t);try{n.c()}catch(r){throw n.d(),r}var i=n.d.bind(n);return i[Symbol.dispose]=i,i}var Dt,z,Ut=[];F(function(){Dt=this.N})();function I(e,t){D[e]=t.bind(null,D[e]||function(){})}function V(e){z&&z(),z=e&&e.S()}function Ft(e){var t=this,n=e.data,i=we(n);i.value=n;var r=ne(function(){for(var f=t,u=t.__v;u=u.__;)if(u.__c){u.__c.__$f|=4;break}var a=nt(function(){var d=i.value.value;return d===0?0:d===!0?"":d||""}),c=nt(function(){return!Array.isArray(a.value)&&!Bt(a.value)}),_=F(function(){if(this.N=Ht,c.value){var d=a.value;f.__v&&f.__v.__e&&f.__v.__e.nodeType===3&&(f.__v.__e.data=d)}}),l=t.__$u.d;return t.__$u.d=function(){_(),l.call(this)},[c,a]},[]),o=r[0],s=r[1];return o.value?s.peek():s.value}Ft.displayName="ReactiveTextNode";Object.defineProperties(m.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:Ft},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}});I("__b",function(e,t){if(typeof t.type=="function"&&typeof window<"u"&&window.__PREACT_SIGNALS_DEVTOOLS__&&window.__PREACT_SIGNALS_DEVTOOLS__.exitComponent(),typeof t.type=="string"){var n,i=t.props;for(var r in i)if(r!=="children"){var o=i[r];o instanceof m&&(n||(t.__np=n={}),n[r]=o,i[r]=o.peek())}}e(t)});I("__r",function(e,t){if(typeof t.type=="function"&&typeof window<"u"&&window.__PREACT_SIGNALS_DEVTOOLS__&&window.__PREACT_SIGNALS_DEVTOOLS__.enterComponent(t),t.type!==A){V();var n,i=t.__c;i&&(i.__$f&=-2,(n=i.__$u)===void 0&&(i.__$u=n=function(r){var o;return F(function(){o=this}),o.c=function(){i.__$f|=1,i.setState({})},o}())),V(n)}e(t)});I("__e",function(e,t,n,i){typeof window<"u"&&window.__PREACT_SIGNALS_DEVTOOLS__&&window.__PREACT_SIGNALS_DEVTOOLS__.exitComponent(),V(),e(t,n,i)});I("diffed",function(e,t){typeof t.type=="function"&&typeof window<"u"&&window.__PREACT_SIGNALS_DEVTOOLS__&&window.__PREACT_SIGNALS_DEVTOOLS__.exitComponent(),V();var n;if(typeof t.type=="string"&&(n=t.__e)){var i=t.__np,r=t.props;if(i){var o=n.U;if(o)for(var s in o){var f=o[s];f!==void 0&&!(s in i)&&(f.d(),o[s]=void 0)}else o={},n.U=o;for(var u in i){var a=o[u],c=i[u];a===void 0?(a=ge(n,u,c,r),o[u]=a):a.o(c,r)}}}e(t)});function ge(e,t,n,i){var r=t in e&&e.ownerSVGElement===void 0,o=rt(n);return{o:function(s,f){o.value=s,i=f},d:F(function(){this.N=Ht;var s=o.value.value;i[t]!==s&&(i[t]=s,r?e[t]=s:s!=null&&(s!==!1||t[4]==="-")?e.setAttribute(t,s):e.removeAttribute(t))})}}I("unmount",function(e,t){if(typeof t.type=="string"){var n=t.__e;if(n){var i=n.U;if(i){n.U=void 0;for(var r in i){var o=i[r];o&&o.d()}}}}else{var s=t.__c;if(s){var f=s.__$u;f&&(s.__$u=void 0,f.d())}}e(t)});I("__h",function(e,t,n,i){(i<3||i===9)&&(t.__$f|=2),e(t,n,i)});bt.prototype.shouldComponentUpdate=function(e,t){var n=this.__$u,i=n&&n.s!==void 0;for(var r in t)return!0;if(this.__f||typeof this.u=="boolean"&&this.u===!0){var o=2&this.__$f;if(!(i||o||4&this.__$f)||1&this.__$f)return!0}else if(!(i||4&this.__$f)||3&this.__$f)return!0;for(var s in e)if(s!=="__source"&&e[s]!==this.props[s])return!0;for(var f in this.props)if(!(f in e))return!0;return!1};function we(e,t){return te(function(){return rt(e,t)})[0]}var be=function(e){queueMicrotask(function(){queueMicrotask(e)})};function Ne(){me(function(){for(var e;e=Ut.shift();)Dt.call(e)})}function Ht(){Ut.push(this)===1&&(D.requestAnimationFrame||be)(Ne)}const xt=Symbol.for("_FRESH_SLOT");function Ae(e){return e!==null&&typeof e=="object"&&"kind"in e&&e.kind===xt}const C=new Map;class X extends bt{componentDidMount(){C.set(this.props.name,this)}render(){return this.props.children}}X.displayName="Partial";function gt(e,t,n,i,r){const o=()=>{for(const s in e){const f=e[s];if(Ae(f)){const u=i.get(f.id);if(u!==void 0){const a=g(A,null),c=at(n,u.start,u.end);L(r,[a],[2],c,u.end),e[s]=a}else{const a=document.querySelector(`#frsh-${f.id}-${f.name}`);if(a!==null){const c=g(A,null);L(r,[c],[2],a.content,null),e[s]=c}}}}jt(g(t,e),n)};"scheduler"in window?scheduler.postTask(o):setTimeout(o,0)}const q=new Map,kt={Signal:e=>rt(e),Computed:e=>nt(()=>e),Slot:e=>({kind:xt,name:e.name,id:e.id})};function Se(){return{roots:[],stack:[],slots:new Map,slotIdStack:[]}}function Ie(e,t){const n=Se();Vt(n,document.body);const i=Object.keys(e);for(let o=0;o<i.length;o++){const s=i[o];q.set(s,e[s])}const r=Rt(t,kt);for(let o=0;o<n.roots.length;o++){const s=n.roots[o],f=at(s.start.parentNode,s.start,s.end);if(s.kind===0){const u=r[s.propsIdx].props,a=q.get(s.name);gt(u,a,f,n.slots,r)}else if(s.kind===1){const u={name:s.name,children:null},a=g(A,null);L(r,[a],[1],f,s.end),u.children=a.props.children,gt(u,X,f,n.slots,r)}}}function wt(e){return e.nodeType===Node.TEXT_NODE&&typeof e._frshMarker=="string"}function w(e){const t=new Text("");return t._frshMarker=e.data,e.parentNode.insertBefore(t,e),e.remove(),t}function Vt(e,t){if(ft(t)){if(t.nodeName==="SCRIPT"||t.nodeName==="STYLE"||e.slotIdStack.length>0)return;for(let n=0;n<t.childNodes.length;n++){const i=t.childNodes[n];Vt(e,i)}}else if(st(t)){const n=t.data;if(n.startsWith("frsh:")){t=w(t);const i=n.split(":"),r=i[1];if(r==="island"){const o=i[2],s=i[3],f=i[4],u={kind:0,name:o,propsIdx:Number(s),key:f===""?null:f,start:t,end:null};e.stack.length===0&&e.roots.push(u),e.stack.push(u)}else if(r==="slot"){const o=+i[2],s=i[3];e.slotIdStack.push(o),e.slots.set(o,{name:s,start:t,end:null})}else if(r==="partial"){const o=i[2],s=i[3],f={kind:1,name:o,key:s===""?null:s,start:t,end:null};e.stack.length===0&&e.roots.push(f),e.stack.push(f)}}else if(n==="/frsh:island"||n==="/frsh:partial"){t=w(t);const i=e.stack.pop();i!==void 0&&(i.end=t)}else if(n==="/frsh:slot"){t=w(t);const i=e.slotIdStack.pop();i!==void 0&&(e.slots.get(i).end=t)}}}var Ee=function(e){return e[e.Island=0]="Island",e[e.Partial=1]="Partial",e[e.Slot=2]="Slot",e}({});function Te(e){return e.children}function L(e,t,n,i,r){let o=i;for(;o!==null;){if(o===r)return;if(o._frshRootFrag||o instanceof DocumentFragment){const s=o.firstChild;s!==null&&L(e,t,n,s,r)}else if(ft(o)){const s={};for(let _=0;_<o.attributes.length;_++){const l=o.attributes[_];if(l.nodeName===Zt){s.key=l.nodeValue;continue}s[l.nodeName]=typeof o[l.nodeName]=="boolean"?!0:l.nodeValue}const f=g(o.localName,s),u=n.at(-1),a=u===2||u===1;a&&(T(t.at(-1),f),t.push(f));const c=o.firstChild;c!==null&&L(e,t,n,c,r),a&&t.pop()}else if(st(o)||wt(o)){const s=wt(o)?o._frshMarker:o.data;if(s.startsWith("frsh:")){const f=s.split(":"),u=f[1];if(u==="island"){o=w(o),n.push(0);const a=f[2],c=f[3],_=f[4],l=q.get(a);if(l===void 0)throw new Error(`Encountered unknown island: ${a}`);const d=e[+c].props;d.key=_===""?void 0:_;const y=g(l,d);T(t.at(-1),y),t.push(y)}else if(u==="slot"){o=w(o),n.push(2);const a=+f[2],c=f[3],_=f[4],l=g(Te,{key:_===""?void 0:_,id:a,name:c,children:[]}),d=t.at(-1);d.props[c]=l,t.push(l)}else if(u==="partial"){o=w(o),n.push(1);const a=f[2],c=+f[3],_=f[4];let l=g(X,{name:a,key:_===""?void 0:_,mode:c});const d=t.at(-1);if(d!==void 0&&T(d,l),c===R.Append){const y=C.get(a);if(y!==void 0){W(l.props,y.props.children);const P=g(A,null);T(l,P),l=P}}else if(c===R.Prepend){const y=C.get(a);if(y!==void 0){W(l.props,y.props.children);const P=g(A,null);l.props.children||(l.props.children=[]),l.props.children.unshift(P),l=P}}t.push(l)}else if(u==="key"){{const c=o;o=o.nextSibling,c.remove()}const a=g(A,{key:f[2]});T(t.at(-1),a),t.push(a);continue}}else s==="/frsh:island"||s==="/frsh:slot"||s==="/frsh:partial"?(t.pop(),n.pop(),o=w(o)):s==="/frsh:key"&&(t.pop(),o=w(o))}else if(Re(o)){const s=n.at(-1);(s===2||s===1)&&T(t.at(-1),o.data)}o=o.nextSibling}}function T(e,t){e.props.children||(e.props.children=[]),e.props.children.push(t)}function W(e,t){e.children=t!=null?Array.isArray(t)?t:[t]:[]}function st(e){return e.nodeType===Node.COMMENT_NODE}function Re(e){return e.nodeType===Node.TEXT_NODE}function ft(e){return e.nodeType===Node.ELEMENT_NODE&&!("_frshRootFrag"in e)}function at(e,t,n){const i={_frshRootFrag:!0,nodeType:1,parentNode:e,nextSibling:null,get firstChild(){const r=t.nextSibling;return r===n?null:r},get childNodes(){const r=[];let o=t.nextSibling;for(;o!==null&&o!==n;)r.push(o),o=o.nextSibling;return r},insertBefore(r,o){e.insertBefore(r,o??n)},appendChild(r){e.insertBefore(r,n)},removeChild(r){e.removeChild(r)},contains(r){if(r===null)return!1;const o=i.childNodes;for(let s=0;s<o.length;s++)if(o[s].contains(r))return!0;return!1}};return i}const G="f-partial";class qt extends Error{}function Y(e){const t=e.closest(`[${S}]`);return t===null?!1:t.getAttribute(S)!=="false"}let U=history.state?.index||0;if(!history.state){const e={fClientNav:!0,index:U,scrollX,scrollY};history.replaceState(e,document.title)}function Wt(e){if(e.href!==globalThis.location.href){const t={fClientNav:!0,index:U,scrollX:globalThis.scrollX,scrollY:globalThis.scrollY};history.replaceState({...t},"",location.href),U++,t.scrollX=0,t.scrollY=0,history.pushState(t,"",e.href)}}document.addEventListener("click",async e=>{let t=e.target;if(t&&(t instanceof HTMLElement||t instanceof SVGElement)){const n=t;if(t.nodeName!=="A"&&(t=t.closest("a")),t===null&&(t=n.closest("button")),t&&t instanceof HTMLAnchorElement&&t.href&&(!t.target||t.target==="_self")&&t.origin===location.origin&&e.button===0&&!(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.button)&&!e.defaultPrevented){const i=t.getAttribute(G);if(t.getAttribute("href")?.startsWith("#")||!Y(t))return;const r=t._freshIndicator;r!==void 0&&(r.value=!0),e.preventDefault();const o=new URL(t.href);try{Wt(o);const s=new URL(i||o.href,location.href);await B(o,s,!0),Gt(o),scrollTo({left:0,top:0,behavior:"instant"})}finally{r!==void 0&&(r.value=!1)}}else if(t&&t instanceof HTMLButtonElement&&(t.type!=="submit"||t.form===null)){const i=t.getAttribute(G);if(i===null||!Y(t))return;const r=new URL(i,location.href);await B(r,r,!1)}}});addEventListener("popstate",async e=>{if(e.state===null){history.scrollRestoration&&(history.scrollRestoration="auto");return}if(!e.state.fClientNav)return;const t=history.state;U=t.index??U+1;const i=document.querySelector(`[${S}]`);if(i===null||i.getAttribute(S)==="false"){location.reload();return}history.scrollRestoration&&(history.scrollRestoration="manual");const r=new URL(location.href,location.origin);try{await B(r,r,!0),Gt(r),scrollTo({left:t.scrollX??0,top:t.scrollY??0,behavior:"instant"})}catch(o){if(o instanceof qt){location.reload();return}throw o}});document.addEventListener("submit",async e=>{const t=e.target;if(t!==null&&t instanceof HTMLFormElement&&!e.defaultPrevented){if(!Y(t)||e.submitter!==null&&!Y(e.submitter))return;const n=e.submitter?.getAttribute("formmethod")?.toLowerCase()??t.method.toLowerCase();if(n!=="get"&&n!=="post")return;const i=e.submitter?.getAttribute(G)??e.submitter?.getAttribute("formaction")??t.getAttribute(G)??t.action,r=e.submitter?.getAttribute("formaction")??t.action;if(i!==""){e.preventDefault();const o=new URL(i,location.href),s=new URL(r,location.href);let f;n==="get"?new URLSearchParams(new FormData(t,e.submitter)).forEach((a,c)=>o.searchParams.append(c,a)):f={body:new FormData(t,e.submitter),method:n},await B(s,o,!0,f)}}});function Gt(e){document.querySelectorAll("a").forEach(t=>{const n=Jt(e.pathname,t.href);n===ut.Current?(t.setAttribute(K,"true"),t.setAttribute("aria-current","page"),t.removeAttribute(Z)):n===ut.Ancestor?(t.setAttribute(Z,"true"),t.setAttribute("aria-current","true"),t.removeAttribute(K)):(t.removeAttribute(K),t.removeAttribute(Z),t.removeAttribute("aria-current"))})}async function B(e,t,n,i={}){i.redirect="follow",t=new URL(t),t.searchParams.set(Kt,"true");const r=await fetch(t,i);if(r.redirected){const o=new URL(r.url);o.origin===e.origin&&(e=o)}n&&Wt(e),await Ce(r)}async function Ce(e){if(e.headers.get("Content-Type")!=="text/html; charset=utf-8")throw new Error("Unable to process partial response.");const n=e.headers.get("X-Fresh-Id"),i=await e.text(),r=new DOMParser().parseFromString(i,"text/html"),o=r.querySelector(`#__FRSH_STATE_${n}`);let s=[];if(o!==null){const u=JSON.parse(o.textContent),a=[];s=Rt(u.props,kt);for(let c=0;c<u.islands.length;c++){const _=u.islands[c];a.push(import(_.chunk).then(l=>{q.set(_.name,l[_.exportName])}))}await Promise.all(a)}const f={foundPartials:0};if(r.title&&(document.title=r.title),Array.from(r.head.childNodes).forEach(u=>{const a=u;if(a.nodeName!=="TITLE"){if(a.nodeName==="META"){const c=a;if(c.hasAttribute("charset"))return;const _=c.name;if(_!==""){const l=document.head.querySelector(`meta[name="${_}"]`);l!==null?l.content!==c.content&&(l.content=c.content):document.head.appendChild(c)}else{const l=a.getAttribute("property"),d=document.head.querySelector(`meta[property="${l}"]`);d!==null?d.content!==c.content&&(d.content=c.content):document.head.appendChild(c)}}else if(a.nodeName==="LINK"){const c=a;if(c.rel==="modulepreload")return;c.rel==="stylesheet"&&Array.from(document.head.querySelectorAll("link")).find(l=>l.href===c.href)===void 0&&document.head.appendChild(c)}else if(a.nodeName==="SCRIPT"){if(a.src===`${Xt}/fresh-runtime.js`)return}else if(a.nodeName==="STYLE"){const c=a;c.id===""&&document.head.appendChild(c)}}}),Yt(f,s,r.body),f.foundPartials===0)throw new qt(`Found no partials in HTML response. Please make sure to render at least one partial. Requested url: ${e.url}`)}function Yt(e,t,n){let i=null,r=n.firstChild,o=0,s="",f="",u=R.Replace;for(;r!==null;){if(st(r)){const a=r.data,c=a.split(":");if(c[0]==="frsh"&&(r=w(r)),c[0]==="frsh"&&c[1]==="partial")++o===1&&(i=r,s=c[2],u=+c[3],f=c[4]);else if(a==="/frsh:partial"){if(e.foundPartials++,--o>0){r=r.nextSibling;continue}const _=at(n,i,r),l=g(X,{key:f!==""?f:void 0,name:s,mode:u,children:null});L(t,[l],[Ee.Partial],_,r);const d=C.get(s);if(d===void 0)console.warn(`Partial "${s}" not found. Skipping...`);else{if(u===R.Replace)d.props.children=l.props.children;else if(u===R.Append){const y=C.get(s);y!==void 0?(W(d.props,y.props.children),d.props.children.push(l.props.children)):d.props.children=l.props.children}else if(u===R.Prepend){const y=C.get(s);y!==void 0?(W(d.props,y.props.children),d.props.children.unshift(l.props.children)):d.props.children=l.props.children}d.setState({})}}}else o===0&&ft(r)&&Yt(e,t,r);r=r.nextSibling}}Mt(!1);const Pe=typeof document<"u";function Oe(e){return it(e,At)}function Le(e){return e.children}Le.displayName="Partial";export{Pe as IS_BROWSER,Le as Partial,Oe as asset,Ie as boot,gt as revive};
